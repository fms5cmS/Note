Spring Cloud是一个分布式的整体解决方案。Spring Cloud 为开发者提供了**在分布式系统（配置管理，服务发现，熔断，路由，微代理，控制总线，一次性token，全局琐，leader选举，分布式session，集群状态）中快速构建的工具**，使用Spring Cloud的开发者可以快速的启动服务或构建应用、同时能够快速和云平台资源进行对接。

SpringCloud在做微服务时是通过HTTP进行通信的。

SpringCloud分布式开发五大常用组件：

- 服务发现与发现——Netflix Eureka
- 客户端负载均衡——Netflix Ribbon
- 断路器——Netflix Hystrix
- 服务网关——Netflix Zuul
- 分布式配置——Spring Cloud Config

参考：https://github.com/forezp/SpringCloudLearning/blob/master/README.md

版本号：按照单词(伦敦地铁站的名字?)首字母升序



# 微服务

微服务架构是⼀种架构模式，它提倡**将单⼀应⽤程序划分成⼀组⼩的服务**，服务之间互相协调、互相配合，为⽤户提供最终价值。**每个服务运⾏在其独⽴的进程中**，服务与服务间**采⽤轻量级的通信机制互相协作（通常是基于HTTP协议的RESTful API，注意 Dubbo是基于RPC的）**。每个服务都围绕着具体业务进⾏构建，并且能够被**独⽴部署**到⽣产环境、类⽣产环境等。另外，应当尽量避免统⼀的、集中式的服务管理机制，对具体的⼀个服务⽽⾔，应根据业务上下⽂，选择合适的语⾔、⼯具对其进⾏构建。

微服务化的核心就是将传统的一站式应用，**根据业务拆分成一个一个的服务**，彻底地去耦合,每一个微服务提供单个业务功能的服务，一个服务做一件事，从技术角度看就是一种小而独立的处理过程，类似进程概念，能够自行单独启动或销毁，拥有自己独立的数据库。



## 优缺点

- 优点：
  - 每个服务足够内聚，足够小，代码容易理解这样能聚焦一个指定的业务功能或业务需求开发简单、开发效率提高，一个服务可能就是专一的只干一件事。
  - 微服务能够被小团队单独开发，这个小团队是2到5人的开发人员组成。
  - 微服务是松耦合的，是有功能意义的服务，无论是在开发阶段或部署阶段都是独立的。
  - 微服务能使用不同的语言开发。易于和第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续集成工具，如Jenkins, Hudson, bamboo 。
  - 微服务易于被一个开发人员理解，修改和维护，这样小团队能够更关注自己的工作成果。无需通过合作才能体现价值。
  - 微服务允许你利用融合最新技术。
  - 微服务只是业务逻辑的代码，不会和HTML,CSS 或其他界面组件混合。
  - 每个微服务都有自己的存储能力，可以有自己的数据库。也可以有统一数据库。
- 缺点：
  - 开发人员要处理分布式系统的复杂性
  - 多服务运维难度，随着服务的增加，运维的压力也在增大
  - 系统部署依赖
  - 服务间通信成本
  - 数据一致性
  - 系统集成测试
  - 性能监控……



## 技术栈

- 基础组件：
  - 服务注册发现
  - 服务网关(Service Gateway)：安全相关，如用户的认证、授权、反爬虫等
  - 后端通用服务(中间层服务 Middle Tier Service)：启动时会将地址信息注册到服务注册表中
  - 前端服务(边缘服务 Edge Service)：通过查询服务注册表就可以发现调用后端服务
    - 作用：对后端服务做必要的**聚合**和**裁剪**后暴露给外部不同的设备
      - 聚合：假设客户端要请求两个APi，一个获取用户的个人信息、一个获取用户的收货地址。这两个服务都是由后端提供的，如果后端直接调用的话需要调用两次，而前端服务可以做聚合，把两个接口合二为一，作为一个接口提供出去，此时客户端只需要调用前端服务的一个接口即可
      - 裁剪：跟聚合相反，可能根据不同需求返回不同数据。如：都是商品详情，PC端请求的话返回信息可能会尽量详细一些，手机端的话可能不会那么详细，又或者PC上返回HTML、手机上返回JSON报文。



| 微服务条目                             | 技术                                                         |
| -------------------------------------- | ------------------------------------------------------------ |
| 服务开发                               | Springboot、Spring、SpringMVC                                |
| 服务配置与管理                         | Netflix公司的Archaius、阿里的Diamond等                       |
| 服务注册与发现                         | Eureka、Consul、Zookeeper等                                  |
| 服务调用                               | Rest、RPC、gRPC                                              |
| 服务熔断器                             | Hystrix、Envoy等                                             |
| 负载均衡                               | Ribbon、Nginx等                                              |
| 服务接口调用(客户端调用服务的简化工具) | Feign等                                                      |
| 消息队列                               | Kafka、RabbitMQ、ActiveMQ等                                  |
| 服务配置中心管理                       | SpringCloudConfig、Chef等                                    |
| 服务路由（API网关）                    | Zuul等                                                       |
| 服务监控                               | Zabbix、Nagios、Metrics、Spectator等                         |
| 全链路追踪                             | Zipkin，Brave、Dapper等                                      |
| 服务部署                               | Docker、OpenStack、Kubernetes等                              |
| 数据流操作开发包                       | SpringCloud Stream（封装与Redis,Rabbit、Kafka等发送接收消息） |
| 事件消息总线                           | Spring Cloud Bus                                             |