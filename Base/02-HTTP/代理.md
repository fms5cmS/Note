# 正向代理

一般情况下，如果没有特别说明，代理技术默认指正向代理(Forward Proxy)技术。

正向代理是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。**客户端才能使用正向代理，客户端必须设置正向代理服务器，当然，前提是知道正向代理服务器的IP地址、代理程序的端口**。

使用正向代理服务器的作用：

1. 访问原本无法访问的资源，如Google；
2. 做Cache，加速访问资源；
3. 对客户端访问授权，上网进行认证；
4. 代理可以记录用户访问记录(上网行为管理)，隐藏访问者行踪：由于代理服务器代替客户端来直接与服务器交互，所以服务器并不知道访问自己的实际用户是谁。



# 反向代理

反向代理(Reverse Proxy)对外是透明的，访问者并不知道自己访问的是一个代理。实际运行方式：以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。

**客户端只会得知反向代理的IP地址，而不知道在代理服务器后面的服务器簇的存在，也就是说，对于客户端而言，代理服务器就像是原始服务器，且客户端不需要进行任何特别的设置**。

使用反向代理服务器的作用：

1. 保护内网的安全，可以使用反向代理提供WAF功能，阻止web攻击
   - 大型网站通常将反向代理作为公网访问地址，Web服务器是内网；
2. 负载均衡，通过反向代理服务器来优化网站的负载。



# 正反向代理区别

这里引用知乎上的一个图片：（详见知乎问题[反向代理为何叫反向代理](https://www.zhihu.com/question/24723688)）

![](https://pic4.zhimg.com/80/2582ac2a1366e3e12acf274265ea80f3_hd.jpg)

- 位置不同：
  - 正向代理中，代理和客户端在同一个LAN中，对服务端透明；
  - 反向代理中，代理和服务端在同一个LAN中，对客户端透明。
- 代理对象不同：
  - 正向代理：代理客户端，服务端不知道实际发起请求的客户端；
  - 反向代理：代理服务端，客户端不知道实际提供服务的服务端；
- 用途不同：
  - 正向代理为防火墙内的局域网客户端提供访问 internet 的途径；
  - 反向代理将防火墙后面的服务器提供给 internet 访问；
- 安全性不同：
  - 正向代理允许客户端通过它访问任意网站并且隐藏客户端自身，因此必须采取安全措施以确保仅为授权的客户端提供服务； 
  - 反向代理都对外都是透明的，访问者并不知道自己访问的是哪一个代理。

在正、反向代理中，代理服务器所做的都是代为收发请求和响应，但从结构上看正好左右互换了以下，所以后出现的代理方式就叫做反向代理。

